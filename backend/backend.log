INFO:     Started server process [22619]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
No existing metadata found, starting fresh
No existing FAISS index found, will create when needed
Loaded note tree from storage/note_tree.json
DEBUG: Starting index rebuild...
Index cleared
DEBUG: Cleared existing index
Attempting to load sentence-transformers model: all-MiniLM-L6-v2
✓ Imported SentenceTransformer
✓ Created SentenceTransformer instance
✓ Model loaded successfully. Embedding dimension: 384
Creating new FAISS index with dimension 384
Saved note tree to storage/note_tree.json
Updated note: note_1764903360_5175
DEBUG: Indexed note: note_1764903360_5175 with 1 chunks
DEBUG: Successfully rebuilt index with 1 notes
INFO:     127.0.0.1:50893 - "POST /admin/rebuild-index HTTP/1.1" 200 OK
DEBUG: Search request for note_id: test_query, text length: 23
INFO:     127.0.0.1:50897 - "POST /search HTTP/1.1" 200 OK
DEBUG: Updating note with id: dragons_and_magic, normalized: dragons_and_magic, parent_id: None
DEBUG: Wrote note data to /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/dragons_and_magic.json
DEBUG: Updating search index for note: dragons_and_magic
Saved note tree to storage/note_tree.json
Updated note: dragons_and_magic
DEBUG: Successfully updated search index for note: dragons_and_magic with 1 chunks
INFO:     127.0.0.1:50898 - "POST /update-note HTTP/1.1" 200 OK
DEBUG: Updating note with id: wizardry_school, normalized: wizardry_school, parent_id: None
DEBUG: Wrote note data to /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/wizardry_school.json
DEBUG: Updating search index for note: wizardry_school
Saved note tree to storage/note_tree.json
Updated note: wizardry_school
DEBUG: Successfully updated search index for note: wizardry_school with 1 chunks
INFO:     127.0.0.1:50899 - "POST /update-note HTTP/1.1" 200 OK
DEBUG: Search request for note_id: test_query, text length: 26
INFO:     127.0.0.1:50900 - "POST /search HTTP/1.1" 200 OK
DEBUG: Deleting note/folder: wizardry_school
DEBUG: Deleted note file: /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/wizardry_school.json
DEBUG: Removing 1 note(s) from search index: ['wizardry_school']
Rebuilt index with 2 embeddings
Saved note tree to storage/note_tree.json
Deleted note: wizardry_school
DEBUG: Removed wizardry_school from search index
INFO:     127.0.0.1:50901 - "POST /delete-note HTTP/1.1" 200 OK
DEBUG: Search request for note_id: test_query, text length: 26
INFO:     127.0.0.1:50911 - "POST /search HTTP/1.1" 200 OK
DEBUG: Deleting note/folder: dragons_and_magic
DEBUG: Deleted note file: /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/dragons_and_magic.json
DEBUG: Removing 1 note(s) from search index: ['dragons_and_magic']
Rebuilt index with 1 embeddings
Saved note tree to storage/note_tree.json
Deleted note: dragons_and_magic
DEBUG: Removed dragons_and_magic from search index
INFO:     127.0.0.1:50912 - "POST /delete-note HTTP/1.1" 200 OK
INFO:     127.0.0.1:50919 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50920 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50921 - "GET /all-notes HTTP/1.1" 404 Not Found
DEBUG: Getting note with id: welcome, normalized: welcome
DEBUG: Note not found at /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/welcome.json
INFO:     127.0.0.1:50922 - "GET /note/welcome HTTP/1.1" 404 Not Found
DEBUG: Getting note with id: manual-test, normalized: manual-test
DEBUG: Note not found at /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/manual-test.json
INFO:     127.0.0.1:50923 - "GET /note/manual-test HTTP/1.1" 404 Not Found
DEBUG: Getting note with id: note_1764903360_5175, normalized: note_1764903360_5175
DEBUG: Loaded note from /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764903360_5175.json
INFO:     127.0.0.1:50923 - "GET /note/note_1764903360_5175 HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764903360_5175, text length: 33
INFO:     127.0.0.1:50923 - "POST /search HTTP/1.1" 200 OK
INFO:     127.0.0.1:50924 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50925 - "POST /rename-note HTTP/1.1" 200 OK
INFO:     127.0.0.1:50926 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50925 - "GET /notes HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764903360_5175, text length: 45
INFO:     127.0.0.1:50927 - "POST /search HTTP/1.1" 200 OK
INFO:     127.0.0.1:50928 - "GET / HTTP/1.1" 200 OK
DEBUG: Updating note with id: note_1764903360_5175, normalized: note_1764903360_5175, parent_id: None
DEBUG: Wrote note data to /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764903360_5175.json
DEBUG: Updating search index for note: note_1764903360_5175
Creating new FAISS index with dimension 384
Saved note tree to storage/note_tree.json
Updated note: note_1764903360_5175
DEBUG: Successfully updated search index for note: note_1764903360_5175 with 1 chunks
INFO:     127.0.0.1:50927 - "POST /update-note HTTP/1.1" 200 OK
INFO:     127.0.0.1:50929 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50930 - "GET / HTTP/1.1" 200 OK
DEBUG: Updating note with id: note_1764904162_1656, normalized: note_1764904162_1656, parent_id: None
DEBUG: Wrote note data to /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764904162_1656.json
DEBUG: Updating search index for note: note_1764904162_1656
Saved note tree to storage/note_tree.json
Updated note: note_1764904162_1656
DEBUG: Successfully updated search index for note: note_1764904162_1656 with 1 chunks
INFO:     127.0.0.1:50927 - "POST /update-note HTTP/1.1" 200 OK
INFO:     127.0.0.1:50931 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50927 - "GET /notes HTTP/1.1" 200 OK
DEBUG: Getting note with id: note_1764904162_1656, normalized: note_1764904162_1656
DEBUG: Loaded note from /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764904162_1656.json
INFO:     127.0.0.1:50927 - "GET /note/note_1764904162_1656 HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904162_1656, text length: 33
INFO:     127.0.0.1:50927 - "POST /search HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904162_1656, text length: 15
INFO:     127.0.0.1:50932 - "POST /search HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904162_1656, text length: 17
INFO:     127.0.0.1:50932 - "POST /search HTTP/1.1" 200 OK
INFO:     127.0.0.1:50933 - "GET / HTTP/1.1" 200 OK
DEBUG: Updating note with id: note_1764904162_1656, normalized: note_1764904162_1656, parent_id: None
DEBUG: Wrote note data to /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764904162_1656.json
DEBUG: Updating search index for note: note_1764904162_1656
Rebuilt index with 1 embeddings
Saved note tree to storage/note_tree.json
Updated note: note_1764904162_1656
DEBUG: Successfully updated search index for note: note_1764904162_1656 with 1 chunks
INFO:     127.0.0.1:50932 - "POST /update-note HTTP/1.1" 200 OK
DEBUG: Getting note with id: note 1, normalized: note 1
DEBUG: Loaded note from /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note 1.json
INFO:     127.0.0.1:50932 - "GET /note/note%201 HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note 1, text length: 33
INFO:     127.0.0.1:50932 - "POST /search HTTP/1.1" 200 OK
DEBUG: Getting note with id: note_1764903360_5175, normalized: note_1764903360_5175
DEBUG: Loaded note from /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764903360_5175.json
INFO:     127.0.0.1:50932 - "GET /note/note_1764903360_5175 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50934 - "GET / HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764903360_5175, text length: 45
INFO:     127.0.0.1:50932 - "POST /search HTTP/1.1" 200 OK
DEBUG: Deleting note/folder: note_1764903360_5175
DEBUG: Deleted note file: /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764903360_5175.json
DEBUG: Removing 1 note(s) from search index: ['note_1764903360_5175']
Rebuilt index with 1 embeddings
Saved note tree to storage/note_tree.json
Deleted note: note_1764903360_5175
DEBUG: Removed note_1764903360_5175 from search index
INFO:     127.0.0.1:50935 - "POST /delete-note HTTP/1.1" 200 OK
INFO:     127.0.0.1:50936 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50932 - "GET /notes HTTP/1.1" 200 OK
DEBUG: Getting note with id: note 1, normalized: note 1
DEBUG: Loaded note from /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note 1.json
INFO:     127.0.0.1:50932 - "GET /note/note%201 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50937 - "GET / HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note 1, text length: 33
INFO:     127.0.0.1:50932 - "POST /search HTTP/1.1" 200 OK
DEBUG: Deleting note/folder: note 1
DEBUG: Deleted note file: /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note 1.json
DEBUG: Removing 1 note(s) from search index: ['note 1']
Note/folder not found: note 1
DEBUG: Note note 1 was not in search index (may not have had indexed content)
INFO:     127.0.0.1:50935 - "POST /delete-note HTTP/1.1" 200 OK
INFO:     127.0.0.1:50938 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50932 - "GET /notes HTTP/1.1" 200 OK
INFO:     127.0.0.1:50939 - "GET / HTTP/1.1" 200 OK
DEBUG: Deleting note/folder: note_1764904162_1656
DEBUG: Deleted note file: /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764904162_1656.json
DEBUG: Removing 1 note(s) from search index: ['note_1764904162_1656']
Saved note tree to storage/note_tree.json
Deleted note: note_1764904162_1656
DEBUG: Removed note_1764904162_1656 from search index
INFO:     127.0.0.1:50932 - "POST /delete-note HTTP/1.1" 200 OK
INFO:     127.0.0.1:50940 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50932 - "GET /notes HTTP/1.1" 200 OK
INFO:     127.0.0.1:50941 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50942 - "GET / HTTP/1.1" 200 OK
DEBUG: Updating note with id: note_1764904186_6081, normalized: note_1764904186_6081, parent_id: None
DEBUG: Wrote note data to /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764904186_6081.json
DEBUG: Updating search index for note: note_1764904186_6081
Creating new FAISS index with dimension 384
Saved note tree to storage/note_tree.json
Updated note: note_1764904186_6081
DEBUG: Successfully updated search index for note: note_1764904186_6081 with 1 chunks
INFO:     127.0.0.1:50932 - "POST /update-note HTTP/1.1" 200 OK
INFO:     127.0.0.1:50943 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50932 - "GET /notes HTTP/1.1" 200 OK
DEBUG: Getting note with id: note_1764904186_6081, normalized: note_1764904186_6081
DEBUG: Loaded note from /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764904186_6081.json
INFO:     127.0.0.1:50932 - "GET /note/note_1764904186_6081 HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904186_6081, text length: 33
INFO:     127.0.0.1:50932 - "POST /search HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904186_6081, text length: 40
INFO:     127.0.0.1:50945 - "POST /search HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904186_6081, text length: 49
INFO:     127.0.0.1:50945 - "POST /search HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904186_6081, text length: 50
INFO:     127.0.0.1:50945 - "POST /search HTTP/1.1" 200 OK
INFO:     127.0.0.1:50946 - "GET / HTTP/1.1" 200 OK
DEBUG: Updating note with id: note_1764904186_6081, normalized: note_1764904186_6081, parent_id: None
DEBUG: Wrote note data to /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764904186_6081.json
DEBUG: Updating search index for note: note_1764904186_6081
Creating new FAISS index with dimension 384
Saved note tree to storage/note_tree.json
Updated note: note_1764904186_6081
DEBUG: Successfully updated search index for note: note_1764904186_6081 with 1 chunks
INFO:     127.0.0.1:50945 - "POST /update-note HTTP/1.1" 200 OK
INFO:     127.0.0.1:50947 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "GET / HTTP/1.1" 200 OK
DEBUG: Updating note with id: note_1764904207_5040, normalized: note_1764904207_5040, parent_id: None
DEBUG: Wrote note data to /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764904207_5040.json
DEBUG: Updating search index for note: note_1764904207_5040
Saved note tree to storage/note_tree.json
Updated note: note_1764904207_5040
DEBUG: Successfully updated search index for note: note_1764904207_5040 with 1 chunks
INFO:     127.0.0.1:50949 - "POST /update-note HTTP/1.1" 200 OK
INFO:     127.0.0.1:50950 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50949 - "GET /notes HTTP/1.1" 200 OK
DEBUG: Getting note with id: note_1764904207_5040, normalized: note_1764904207_5040
DEBUG: Loaded note from /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764904207_5040.json
INFO:     127.0.0.1:50949 - "GET /note/note_1764904207_5040 HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904207_5040, text length: 33
INFO:     127.0.0.1:50949 - "POST /search HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904207_5040, text length: 15
INFO:     127.0.0.1:50951 - "POST /search HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904207_5040, text length: 15
INFO:     127.0.0.1:50951 - "POST /search HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904207_5040, text length: 33
INFO:     127.0.0.1:50951 - "POST /search HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904207_5040, text length: 40
INFO:     127.0.0.1:50951 - "POST /search HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904207_5040, text length: 39
INFO:     127.0.0.1:50951 - "POST /search HTTP/1.1" 200 OK
INFO:     127.0.0.1:50952 - "GET / HTTP/1.1" 200 OK
DEBUG: Updating note with id: note_1764904207_5040, normalized: note_1764904207_5040, parent_id: None
DEBUG: Wrote note data to /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764904207_5040.json
DEBUG: Updating search index for note: note_1764904207_5040
Rebuilt index with 1 embeddings
Saved note tree to storage/note_tree.json
Updated note: note_1764904207_5040
DEBUG: Successfully updated search index for note: note_1764904207_5040 with 1 chunks
INFO:     127.0.0.1:50951 - "POST /update-note HTTP/1.1" 200 OK
DEBUG: Getting note with id: note_1764904186_6081, normalized: note_1764904186_6081
DEBUG: Loaded note from /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764904186_6081.json
INFO:     127.0.0.1:50953 - "GET /note/note_1764904186_6081 HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904186_6081, text length: 50
INFO:     127.0.0.1:50953 - "POST /search HTTP/1.1" 200 OK
DEBUG: Getting note with id: note_1764904207_5040, normalized: note_1764904207_5040
DEBUG: Loaded note from /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764904207_5040.json
INFO:     127.0.0.1:50953 - "GET /note/note_1764904207_5040 HTTP/1.1" 200 OK
DEBUG: Search request for note_id: note_1764904207_5040, text length: 39
INFO:     127.0.0.1:50953 - "POST /search HTTP/1.1" 200 OK
INFO:     127.0.0.1:50955 - "GET / HTTP/1.1" 200 OK
DEBUG: Updating note with id: note_1764904207_5040, normalized: note_1764904207_5040, parent_id: None
DEBUG: Wrote note data to /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/note_1764904207_5040.json
DEBUG: Updating search index for note: note_1764904207_5040
Rebuilt index with 1 embeddings
DEBUG: Successfully updated search index for note: note_1764904207_5040 with 0 chunks
INFO:     127.0.0.1:50956 - "POST /update-note HTTP/1.1" 200 OK
INFO:     127.0.0.1:50957 - "GET / HTTP/1.1" 200 OK
DEBUG: Creating folder with path: folder_1764904304_8421
DEBUG: Folder ID: folder_1764904304_8421, filename: folder_1764904304_8421.folder.json
DEBUG: Wrote folder data to /Users/yousafzahir/Documents/GitHub/Grimoire/backend/storage/notes/folder_1764904304_8421.folder.json
DEBUG: Returning response: {'success': True, 'folder_id': 'folder_1764904304_8421', 'folder': {'id': 'folder_1764904304_8421', 'title': 'folder_1764904304_8421', 'type': 'folder', 'children': []}}
INFO:     127.0.0.1:50956 - "POST /create-folder HTTP/1.1" 200 OK
INFO:     127.0.0.1:50958 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:50956 - "GET /notes HTTP/1.1" 200 OK
